{
    "$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/e1a0eda85b9bd4f9558dc4e97d4d0608b0b9295d/tmlanguage.json",
    "name": "PostgreSQL Configuration file",
    "scopeName": "source.pgconf",
    "firstLineMatch": "# -----------------------------\n# PostgreSQL configuration file",
    "repository": {
        "number-unit": {
            "comment": "Integer and double value with trailing unit",
            "match": "\\b([-+]?((0[xX][\\da-fA-F]+)|(\\d+)(\\.\\d+)?([eE][-+]?\\d+)?)(\\s*((B|kB|MB|GB|TB)|(d|h|min|s|ms|us)|([a-zA-Z]+))\\b)?)",
            "captures": {
                "1": {
                    "name": "constant.numeric.pgconf"
                },
                "8": {
                    "name": "entity.name.type.pgconf"
                },
                "11": {
                    "name": "invalid.illegal.unit.pgconf"
                }
            }
        },
        "boolean": {
            "comment": "Boolean value",
            "match": "\\b(on|off|true|false|yes|no)",
            "captures": {
                "1": {
                    "name": "constant.language.boolean.pgconf"
                }
            }
        },
        "string": {
            "comment": "String value without GUC_LIST_STRING",
            "begin": "'",
            "beginCaptures": {
                "0": {
                    "name": "punctuation.definition.string.begin.pgconf"
                }
            },
            "end": "'",
            "endCaptures": {
                "0": {
                    "name": "punctuation.definition.string.end.pgconf"
                }
            },
            "name": "string.quoted.single.pgconf",
            "patterns": [
                {
                    "match": "\\\\.",
                    "name": "constant.character.escape.pgconf"
                }
            ]
        },
        "quoted-value": {
            "match": "(')(\\w+)(')",
            "captures": {
                "1": {
                    "name": "punctuation.definition.string.begin.pgconf"
                },
                "3": {
                    "name": "punctuation.definition.string.end.pgconf"
                },
                "2": {
                    "name": "string.quoted.single.pgconf",
                    "patterns": [
                        {
                            "match": "\\\\.",
                            "name": "constant.character.escape.pgconf"
                        },
                        {
                            "include": "#number-unit"
                        },
                        {
                            "include": "#boolean"
                        }
                    ]
                }
            }
        },
        "enum": {
            "match": "[a-zA-Z_][a-zA-Z0-9_\\.\\-]*",
            "captures": {
                "0": {
                    "name": "variable.parameter.enum.pgconf"
                }
            }
        },
        "param-value": {
            "patterns": [
                {
                    "include": "#quoted-value"
                },
                {
                    "include": "#string"
                },
                {
                    "include": "#number-unit"
                },
                {
                    "include": "#boolean"
                },
                {
                    "include": "#enum"
                }
            ]
        }
    },
    "patterns": [
        {
            "match": "^\\s*#.*$",
            "comment": "Full line comment",
            "name": "comment.line.number-sign.pgconf"
        },
		{
			"begin": "(^[ \\t]+)?(?=#)",
			"beginCaptures": {
				"1": {
					"name": "punctuation.whitespace.comment.leading.pgconf"
				}
			},
			"end": "(?!\\G)",
			"patterns": [
				{
					"begin": "#",
					"beginCaptures": {
						"0": {
							"name": "punctuation.definition.comment.pgconf"
						}
					},
					"end": "\\n",
					"name": "comment.line.number-sign.pgconf"
				}
			]
		},
        {
            "comment": "Parameter definition",
            "match": "^\\s*([a-zA-Z0-9_.-]+)\\s*(=)?",
            "captures": {
                "1": {
                    "name": "keyword.other.definition.pgconf"
                },
                "2": {
                    "name": "punctuation.separator.key-value.pgconf"
                }
            }
        },
        {
            "include": "#param-value"
        }
    ]
}